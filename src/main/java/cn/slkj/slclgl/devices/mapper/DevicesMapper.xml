<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.slkj.slclgl.devices.mapper.DevicesMapper">
	<select id="getAll" resultType="Devices" parameterType="hashmap">
		SELECT * FROM TB_DEVICES
		<where>
			<if test="rktime != null and rktime != ''">and rktime >= #{rktime} </if>
			<if test="rktime1 != null and rktime1 != ''"> and rktime &lt;= #{rktime1} </if>
			<if test="lytime != null and lytime != ''">and lytime >= #{lytime} </if>
			<if test="lytime1 != null and lytime1 != ''"> and lytime &lt;= #{lytime1} </if>
			<if test="fhtime != null and fhtime != ''">and fhtime >= #{fhtime} </if>
			<if test="fhtime1 != null and fhtime1 != ''"> and fhtime &lt;= #{fhtime1} </if>
			<if test="state != null and state != ''">and state =  #{state} </if>
			<if test="lyr != null and lyr != ''"> and lyr like CONCAT('%',#{lyr},'%') </if>
			<if test="firm != null and firm != ''">and firm like CONCAT('%',#{firm},'%')  </if>
		</where>
		LIMIT #{startPage},#{endPage}
	</select>

	<select id="getAllCount" resultType="int" parameterType="hashmap">
		SELECT
		COUNT(1) FROM TB_DEVICES
		<where>
			<if test="rktime != null and rktime != ''">and rktime >= #{rktime} </if>
			<if test="rktime1 != null and rktime1 != ''"> and rktime &lt;= #{rktime1} </if>
			<if test="lytime != null and lytime != ''">and lytime >= #{lytime} </if>
			<if test="lytime1 != null and lytime1 != ''"> and lytime &lt;= #{lytime1} </if>
			<if test="fhtime != null and fhtime != ''">and fhtime >= #{fhtime} </if>
			<if test="fhtime1 != null and fhtime1 != ''"> and fhtime &lt;= #{fhtime1} </if>
			<if test="state != null and state != ''">and state =  #{state} </if>
			<if test="lyr != null and lyr != ''"> and lyr like CONCAT('%',#{lyr},'%') </if>
			<if test="firm != null and firm != ''">and firm like CONCAT('%',#{firm},'%')  </if>
		</where>
	</select>

	<insert id="insert" parameterType="Devices">
		INSERT INTO TB_DEVICES
		(listnum,firm,model,genre,rktime,state,fhtime,lyr,lytime,test,phone,cstime,tresult,gpszj,gpstx,gsmtx,dy,fsd,jsq,sxy,ysq,mkf,remark)
		VALUES(#{listnum},#{firm},#{model},#{genre},#{rktime},#{state},#{fhtime},#{lyr},#{lytime},#{test},#{phone},#{cstime},#{tresult},
		#{gpszj},#{gpstx},#{gsmtx},#{dy},#{fsd},#{jsq},#{sxy},#{ysq},#{mkf},#{remark})
	</insert>
</mapper>